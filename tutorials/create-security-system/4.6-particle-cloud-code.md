# 4.6 Particle Cloud Code

Next, you'll modify your device app to allow a web app to interact with your Photon through the internet.

## Particle Cloud {#particle-cloud}

Remember that all your Photon's internet communications are routed through Particle Cloud, which provides these ways for your web app to interact with your Photon device:

1. A web app can **get the value of a Photon device variable**
2. A web app can **call a custom function on a Photon device**
3. A web app can **get event notifications from a Photon device**

![](../../.gitbook/assets/particle-cloud%20%281%29.png)

The web app that you'll be creating for your "Smart Security" device will perform these tasks:

1. The web app will display whether the security device is currently armed or disarmed. The web app will do this by getting the value of the `deviceMode` variable in your Photon device app.
2. The web app will display a toggle switch that can be clicked to remotely toggle the security device between armed and disarmed mode. The web app will do this by calling the `toggleMode()` function in your Photon device app.
3. The web app will display a notification if the security device detects motion when the device is armed. The web app will also display the date and time of the most recent motion notification. The web app will do this by receiving event notifications sent from your Photon device app.

You'll need to add some code to your Photon device app that will allow your web app to do these things.

## Share Variable and Function

Your Photon app should already have code statements from your "Smart Light" app which you modified to share the `deviceMode` variable and `toggleMode()` function through Particle Cloud.

Be sure the following code is **already** listed within the `setup()` function:

```cpp
Particle.variable("deviceMode", deviceMode);
Particle.function("toggleMode", toggleMode);
```

## Send Event Notification

Your Photon device app will send event notifications to your web app through Particle Cloud using the `Particle.publish()` method. The event notification can be sent with or without data.

Your Photon app should send an event notification whenever the motion sensor detects motion.

Send an event notification through Particle Cloud by adding this code statement **within** your `checkMotion()` custom function \(**after** the `tone()` statement but **before** the `delay()` statement\):

```cpp
Particle.publish("motion");
```

The `Particle.publish()` method requires at least one parameter inside its parentheses:

1. **The cloud event name**, which can be up to 63 characters in length. The name must be listed within double quotation marks. In this case, `"motion"` will be the name of the cloud event.

