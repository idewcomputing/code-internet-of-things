# 4.9 Web App JS

Next, you'll add JavaScript code to allow your web app to interact with your Photon device through Particle Cloud. Remember that the web app will perform these tasks:

1. The web app will display whether the security device is currently armed or disarmed. The web app will do this by getting the value of the `deviceMode` variable in your Photon device app.
2. The web app will display a toggle switch that can be clicked to remotely toggle the security device between armed and disarmed mode. The web app will do this by calling the `toggleMode()` function in your Photon device app.
3. The web app will display a notification if the security device detects motion when the device is armed. The web app will also display the date and time of the most recent motion notification. The web app will do this by receiving event notifications sent from your Photon device app.

## Add Starter JS {#add-starter-html}

[â€‹Copy this starter JS for your web app](https://docs.idew.org/code-internet-of-things/references/web-app#js), and paste it into a **blank** JS file named `code.js`.

**IMPORTANT:**  Be sure to follow the instructions to modify the starter JS to add your actual Photon device ID and access token. Otherwise, your web app will **not** work properly.

## Add Custom JS {#add-custom-html}

Copy this JS, and add it **after** your modified starter JS:

```javascript
var alertSound = new Audio("notification.wav");

window.setInterval(checkMode, 500);

function checkMode() {
    particle.getVariable({ deviceId: myDevice, name: "deviceMode", auth: myToken }).then(function(data) {
        // add code to do something with value returned as: data.body.result
        if (data.body.result == "armed") {
            $("#system-mode").html("ARMED");
            $("input[name=toggle]").prop("checked", true);
        }
        else if (data.body.result == "disarmed") {
            $("#system-mode").html("DISARMED");
            $("input[name=toggle]").prop("checked", false);
        }
    }, function(err) {
            console.log("An error occurred: ", err);
    });
}

function toggleMode() {
    particle.callFunction({ deviceId: myDevice, name: "toggleMode", argument: "data", auth: myToken });
}

particle.getEventStream({ deviceId: myDevice, name: "motion", auth: myToken }).then(function(stream) {
  stream.on('event', function(feed) {
    // add code to do something when event notification received
    // any text data received is stored as: feed.data
    alertSound.play();
    var d = new Date();
    var dateTime = d.toLocaleString();
    $("#event-time").html(dateTime);
    $("#motion-alert").show().delay(1500).fadeOut();
  });
});
```

## Test Web App

Be sure your Photon device is connected to Wi-Fi and Particle Cloud.

Refresh your web app, and test it with your Photon device to make sure they interact correctly:

* Verify that your web app displays the current mode \("armed" or "disarmed"\) of your Smart Security device. Use the push button connected to your Photon device to change the device mode.  When the LED is turned on, the device is in "armed" mode. When the LED is turned off, the device is "disarmed." Verify that your web app updates automatically to show the correct device mode.
* Verify that your web app can remotely change the device mode. Click the toggle switch in your web app, and verify that your Photon device automatically toggles modes \(by checking the LED\).
* While your Smart Security device is in "armed" mode, trigger a motion alert. Verify that your web app displays a motion notification pop-up \(which will fade out after 1.5 seconds\). Verify the web app displays the correct date and time for the last motion event notification.

