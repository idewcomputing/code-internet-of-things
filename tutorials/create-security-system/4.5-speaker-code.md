# 4.5 Speaker Code

Next, you'll add code in your "Smart Security" device app to control the speaker.

The basic steps to control a speaker in your app code are:

1. Declare a global variable to store the I/O pin number for the speaker.
2. Set the pin mode for the speaker pin in the `setup()` function.
3. Use `tone()` statements to produce sounds.

## Global Variable for Speaker

Declare a global variable to store the I/O pin number for the speaker by adding this code statement **before** the `setup()` function:

```cpp
int speaker = D1;
```

If you connected your speaker to a different I/O pin other than `D1`, then modify this code statement to list the correct pin number for your speaker.

## Set Pin Mode for Speaker

Set the pin mode for your speaker pin by adding this code statement **within** the `setup()` function \(between the curly braces\):

```cpp
pinMode(speaker, OUTPUT);
```

## Produce Tone

The speaker will be used to produce an "alarm sound" if the motion sensor detects motion.

The `tone()` method is used to produce a sound of a specific frequency \(pitch\) for a specific duration of time. The speaker can produce tones ranging in frequency from 20Hz \(very low pitch\) to 20KHz \(very high pitch\), which covers the full range of sounds that humans can hear.

Add this code statement **within** your `checkMotion()` custom function \(**inside** the curly braces of the `if` statement that checks the value of `motionState`\):

```text
tone(speaker, 1000, 250);
```

The `tone()` method requires three parameters inside its parentheses \(in this order\):

1. **The I/O pin number**, which can be the actual pin number \(such as: `D1`, etc.\) or a variable that stores a pin number. In this example, your variable named `speaker` is listed.
2. **The frequency for the tone**, which can be an integer value \(whole number\) or a variable that stores an integer. The value can be between 20-20000 hertz. Lower numbers will have a lower pitch, while higher numbers will have a higher pitch. In this example, the frequency will be `1000` hertz, which will be a "less annoying" pitch than what an alarm would typically use.
3. **The duration for the tone**, which can be an integer number \(whole number\) or a variable that stores an integer. The value represents the number of milliseconds that the tone will be played \(1000 ms = 1 second\). In this example, the duration will be `250` ms \(0.25 seconds\), which will be a shorter duration than what an alarm would typically use.



